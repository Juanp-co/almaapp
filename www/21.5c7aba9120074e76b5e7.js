(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"4WDQ":function(i,o,t){"use strict";t.d(o,"a",function(){return a});var e=t("mrSG"),n=t("fXoL"),r=t("TEn/"),s=t("QTu/");let a=(()=>{class i{constructor(i,o,t,e,n){this.alertCtrl=i,this.loadingCtrl=o,this.navCtrl=t,this.cookieService=e,this.modalController=n}presentAlert(i,o){return Object(e.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:i,message:o,buttons:["OK"]});yield t.present()})}presentLoading(i=null){return Object(e.a)(this,void 0,void 0,function*(){return this.loading=yield this.loadingCtrl.create({message:i||"Cargando..."}),this.loading.present()})}dismissLoading(){return Object(e.a)(this,void 0,void 0,function*(){yield this.loading.dismiss()})}alertConfirm({header:i,message:o,confirmAction:t,rejectAction:n}){return Object(e.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:i||"Confirme",message:o||"\xbfEst\xe1 seguro?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{n&&n()}},{text:"S\xed",handler:()=>{t&&t()}}]});yield e.present()})}alertWithList({header:i,inputs:o,confirmAction:t,rejectAction:n}){return Object(e.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:i||"Seleccione",inputs:o,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{n&&n()}},{text:"Ok",handler:i=>{t&&t(i)}}]});yield e.present()})}loadModal(i,o={},t=!0,n=null){return Object(e.a)(this,void 0,void 0,function*(){if(i){const e=yield this.modalController.create({component:i,componentProps:o,backdropDismiss:t});if(e.present(),n){const{data:i}=yield e.onWillDismiss();i?n(i):n()}}})}checkSession(){const i=this.cookieService.getCookie("token");return i||this.clearAllData(),!!i}getRole(){const i=this.cookieService.getCookie("data");return i&&null!=i.role?i.role:null}clearAllData(){this.cookieService.removeCookie("token"),this.cookieService.removeCookie("data")}altResponse(i){return Object(e.a)(this,void 0,void 0,function*(){return i&&i.status&&401===i.status?(this.clearAllData(),{error:401}):(yield this.presentAlert("Alerta",i&&i.error?i.error:"Error desconocido."),null)})}errorSession(){return Object(e.a)(this,void 0,void 0,function*(){yield this.presentAlert("Alerta","Disculpe, pero no se encontr\xf3 una sesi\xf3n activa."),yield this.navCtrl.navigateBack(["/"])})}getPagination(i,o){let t=i>0?Math.trunc(i/o):0;return i>0&&i%o>0&&(t+=1),t}}return i.\u0275fac=function(o){return new(o||i)(n.Sb(r.a),n.Sb(r.I),n.Sb(r.K),n.Sb(s.a),n.Sb(r.J))},i.\u0275prov=n.Hb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},Wtct:function(i,o,t){"use strict";t.r(o),t.d(o,"InicioPageModule",function(){return O});var e=t("ofXK"),n=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),a=t("mrSG"),l=t("fXoL"),c=t("1Ldg"),b=t("QTu/"),d=t("4WDQ");function u(i,o){if(1&i&&(l.Ob(0,"ion-text",9),l.nc(1),l.Nb()),2&i){const i=l.Yb();l.zb(1),l.qc(" ",i.userData.names," ",i.userData.lastNames," ")}}function g(i,o){if(1&i){const i=l.Pb();l.Ob(0,"div",10),l.Mb(1,"br"),l.Mb(2,"br"),l.Mb(3,"br"),l.Ob(4,"ion-row",11),l.Ob(5,"ion-col",12),l.Ob(6,"h4"),l.Ob(7,"ion-text",13),l.nc(8," Inicio de sesi\xf3n "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(9,"ion-row",11),l.Ob(10,"ion-col",14),l.Ob(11,"ion-item"),l.Ob(12,"ion-label",15),l.nc(13,"N\xba de tel\xe9fono"),l.Nb(),l.Ob(14,"ion-input",16),l.Wb("ngModelChange",function(o){return l.hc(i),l.Yb().phone=o}),l.Nb(),l.Nb(),l.Nb(),l.Ob(15,"ion-col",14),l.Ob(16,"ion-item"),l.Ob(17,"ion-label",15),l.nc(18,"Contrase\xf1a"),l.Nb(),l.Ob(19,"ion-input",17),l.Wb("ngModelChange",function(o){return l.hc(i),l.Yb().pass=o}),l.Nb(),l.Nb(),l.Nb(),l.Ob(20,"ion-col",14),l.Ob(21,"p",18),l.Wb("click",function(){return l.hc(i),l.Yb().goTo("recuperar-acceso")}),l.Ob(22,"ion-text",19),l.nc(23,"\xbfOlvidaste tu contrase\xf1a?"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(24,"ion-row",20),l.Ob(25,"ion-col",12),l.Ob(26,"ion-button",21),l.Wb("click",function(){return l.hc(i),l.Yb().goTo("registro")}),l.nc(27," Registro "),l.Nb(),l.Nb(),l.Ob(28,"ion-col",12),l.Ob(29,"ion-button",22),l.Wb("click",function(){return l.hc(i),l.Yb().ingresar()}),l.nc(30," Ingresar "),l.Nb(),l.Nb(),l.Nb(),l.Mb(31,"ion-row",11),l.Nb()}if(2&i){const i=l.Yb();l.zb(14),l.bc("ngModel",i.phone),l.zb(5),l.bc("ngModel",i.pass)}}function h(i,o){if(1&i){const i=l.Pb();l.Ob(0,"ion-col",25),l.Wb("click",function(){l.hc(i);const t=o.index;return l.Yb(2).irMenu(t)}),l.Ob(1,"p"),l.Mb(2,"img",26),l.Nb(),l.Ob(3,"ion-text",27),l.nc(4),l.Nb(),l.Nb()}if(2&i){const i=o.$implicit;l.zb(2),l.bc("src",i.imagen,l.jc),l.zb(2),l.oc(i.titulo)}}function p(i,o){if(1&i&&(l.Ob(0,"div",23),l.Mb(1,"br"),l.Ob(2,"ion-row",11),l.lc(3,h,5,2,"ion-col",24),l.Nb(),l.Mb(4,"br"),l.Nb()),2&i){const i=l.Yb();l.zb(3),l.bc("ngForOf",i.opciones)}}function f(i,o){if(1&i){const i=l.Pb();l.Ob(0,"ion-fab",28),l.Ob(1,"ion-fab-button",29),l.Wb("click",function(){return l.hc(i),l.Yb().goTo("perfil")}),l.Mb(2,"ion-icon",30),l.Nb(),l.Nb()}}const m=[{path:"",component:(()=>{class i{constructor(i,o,t,e){this.axios=i,this.cookieService=o,this.globalSer=t,this.navCtrl=e,this.login=!1,this.userData=null,this.phone="3161234567",this.pass="password",this.opciones=[{titulo:"Red padres",imagen:"assets/icon/red.svg",url:"padres"},{titulo:"Ofrendas",imagen:"assets/icon/ofrenda.svg",url:"ofrenda"},{titulo:"Escuela",imagen:"assets/icon/escuela.svg",url:"escuela"},{titulo:"Reportes",imagen:"assets/icon/reportes.svg",url:"estadistica"},{titulo:"Eventos",imagen:"assets/icon/calendario.svg",url:"eventos"},{titulo:"Salir",imagen:"assets/icon/logout.svg",url:null}]}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){yield this.getDataLogin()})}getDataLogin(){return Object(a.a)(this,void 0,void 0,function*(){if(this.cookieService.getCookie("token")){this.login=!0;const i=this.cookieService.getCookie("data");if(i)this.userData=i;else{const i=yield this.axios.getData("/user");i&&i.success?(this.cookieService.setCookie("data",i.data.data),this.userData=i.data.data,yield this.globalSer.dismissLoading()):(i.status&&401===i.status&&(this.cookieService.removeCookie("token"),this.login=!1),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",i.error))}}else this.login=!1})}ingresar(){return Object(a.a)(this,void 0,void 0,function*(){if(this.pass&&this.phone){yield this.globalSer.presentLoading();const i=yield this.axios.postData("/login",{phone:this.phone,password:this.pass});if(i&&i.success){const{data:o,token:t}=i.data;this.cookieService.setCookie("token",t),this.cookieService.setCookie("data",o),this.userData=o,this.login=!0,this.phone=null,this.pass=null,yield this.globalSer.dismissLoading()}else this.phone=null,this.pass=null,yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",i.error)}else yield this.globalSer.presentAlert("Alerta","Aseg\xfarese de indicar su n\xfamero de tel\xe9fono y contrase\xf1a.")})}irMenu(i){return Object(a.a)(this,void 0,void 0,function*(){const o=this.opciones[i]||null;o&&(o.url?yield this.navCtrl.navigateForward(o.url):yield this.globalSer.alertConfirm({header:"Salir",message:"\xbfEst\xe1 seguro qu\xe9 desea finalizar la sesi\xf3n?",confirmAction:()=>Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading(),this.userData=null,this.axios.deleteData("/logout"),yield this.globalSer.clearAllData(),this.login=!1,yield this.globalSer.dismissLoading()})}))})}goTo(i){return Object(a.a)(this,void 0,void 0,function*(){yield this.navCtrl.navigateForward(`/${i}`)})}}return i.\u0275fac=function(o){return new(o||i)(l.Lb(c.a),l.Lb(b.a),l.Lb(d.a),l.Lb(r.K))},i.\u0275cmp=l.Fb({type:i,selectors:[["app-inicio"]],decls:16,vars:4,consts:[[1,"fondoCool","ion-justify-content-end","ion-padding"],["size","8",1,"ion-margin-top","ion-padding-top"],["color","light",1,"titulo1"],["color","light","class","titulo2",4,"ngIf"],["size","4"],["src","assets/logo.png",1,"logo"],["class","ion-margin-top ion-padding-top",4,"ngIf"],["class","ion-margin-top ion-padding-top ion-margin-bottom ion-padding-bottom",4,"ngIf"],["class","ion-margin-end ion-margin-bottom","vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["color","light",1,"titulo2"],[1,"ion-margin-top","ion-padding-top"],[1,"ion-justify-content-center"],["size","auto"],["color","primary"],["size","9"],["position","floating","color","medium"],["maxlength","12",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[3,"click"],["color","medium",1,"ion-text-start"],[1,"ion-justify-content-center","ion-margin-top"],["expand","block","color","light",3,"click"],["expand","block","color","primary",3,"click"],[1,"ion-margin-top","ion-padding-top","ion-margin-bottom","ion-padding-bottom"],["size","5","class","ion-text-center ion-margin-top ion-padding-top","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["size","5",1,"ion-text-center","ion-margin-top","ion-padding-top",2,"cursor","pointer",3,"click"],["alt","",3,"src"],["color","medium",1,"ion-padding-top"],["vertical","bottom","horizontal","end","slot","fixed",1,"ion-margin-end","ion-margin-bottom"],["color","primary",3,"click"],["name","person-outline"]],template:function(i,o){1&i&&(l.Ob(0,"ion-content"),l.Ob(1,"ion-row",0),l.Ob(2,"ion-col",1),l.Mb(3,"br"),l.Mb(4,"br"),l.Mb(5,"br"),l.Mb(6,"br"),l.Ob(7,"ion-text",2),l.nc(8,"Bienvenido"),l.Nb(),l.Mb(9,"br"),l.lc(10,u,2,2,"ion-text",3),l.Nb(),l.Ob(11,"ion-col",4),l.Mb(12,"img",5),l.Nb(),l.Nb(),l.lc(13,g,32,2,"div",6),l.lc(14,p,5,1,"div",7),l.lc(15,f,3,0,"ion-fab",8),l.Nb()),2&i&&(l.zb(10),l.bc("ngIf",o.userData),l.zb(3),l.bc("ngIf",!o.login),l.zb(1),l.bc("ngIf",o.login),l.zb(1),l.bc("ngIf",o.login))},directives:[r.m,r.B,r.l,r.C,e.i,r.v,r.w,r.u,r.O,n.b,n.e,n.f,r.d,e.h,r.o,r.p,r.s],styles:[".fondoCool[_ngcontent-%COMP%]{background-image:linear-gradient(to right bottom,rgba(0,0,0,.5),rgba(0,0,0,.5)),url(/assets/cruz.png);background-size:cover;background-position:50%}.logo[_ngcontent-%COMP%]{margin-bottom:-190px!important}"]}),i})()}];let v=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=l.Jb({type:i}),i.\u0275inj=l.Ib({imports:[[s.i.forChild(m)],s.i]}),i})(),O=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=l.Jb({type:i}),i.\u0275inj=l.Ib({imports:[[e.b,n.a,r.G,v]]}),i})()}}]);