(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{L5Cb:function(e,i,t){"use strict";t.r(i),t.d(i,"EditarPageModule",function(){return Y});var o=t("ofXK"),n=t("3Pt+"),a=t("TEn/"),r=t("tyNb"),c=t("mrSG"),s=t("Wgwc"),b=t.n(s),l=t("OmbT"),d=t("fXoL"),u=t("0ox5"),p=t("ZrT4"),m=t("1Ldg"),h=t("4WDQ");let f=(()=>{class e{constructor(e,i){this.axios=e,this.globalSer=i,this.professionsList=u.g,this.companyTypeList=u.c,this.departmentsList=p.a,this.educationLevel=u.e,this.bloodTypeList=u.a,this.civilStatusList=u.b,this.genderList=u.f}updateProfile(e){return Object(c.a)(this,void 0,void 0,function*(){const i=yield this.axios.putData("/user",e);return i&&i.success?i.data.data:this.globalSer.altResponse(i)})}}return e.\u0275fac=function(i){return new(i||e)(d.Sb(m.a),d.Sb(h.a))},e.\u0275prov=d.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=t("QTu/"),y=t("76Eu"),g=t("1U7r");function N(e,i){if(1&e){const e=d.Pb();d.Ob(0,"ion-item"),d.Ob(1,"ion-label",5),d.nc(2,"Tipo de empresa (*)"),d.Nb(),d.Ob(3,"ion-input",9),d.Wb("click",function(){d.hc(e);const i=d.Yb(2);return i.showAlertList("companyType","companyType",i.formData.companyType)}),d.Nb(),d.Nb()}if(2&e){const e=d.Yb(2);d.zb(3),d.bc("readonly",!0)("value",e.companyType[e.formData.companyType]||"")}}function D(e,i){if(1&e){const e=d.Pb();d.Ob(0,"div"),d.Ob(1,"ion-card"),d.Ob(2,"ion-card-content",2),d.Ob(3,"ion-row",3),d.Ob(4,"ion-col",4),d.Ob(5,"ion-item"),d.Ob(6,"ion-label",5),d.nc(7,"Nombre(s) (*)"),d.Nb(),d.Ob(8,"ion-input",6),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.names=i}),d.Nb(),d.Nb(),d.Nb(),d.Ob(9,"ion-col",4),d.Ob(10,"ion-item"),d.Ob(11,"ion-label",5),d.nc(12,"Apellido(s) (*)"),d.Nb(),d.Ob(13,"ion-input",6),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.lastNames=i}),d.Nb(),d.Nb(),d.Nb(),d.Ob(14,"ion-col",4),d.Ob(15,"ion-item"),d.Ob(16,"ion-label",5),d.nc(17,"Correo electr\xf3nico (*)"),d.Nb(),d.Ob(18,"ion-input",6),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.email=i}),d.Nb(),d.Nb(),d.Nb(),d.Ob(19,"ion-col",4),d.Ob(20,"ion-item"),d.Ob(21,"ion-label",5),d.nc(22,"Tel\xe9fono (*)"),d.Nb(),d.Ob(23,"ion-input",6),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.phone=i}),d.Nb(),d.Nb(),d.Nb(),d.Ob(24,"ion-col",4),d.Ob(25,"ion-item"),d.Ob(26,"ion-label",5),d.nc(27,"Fecha de nacimiento (*)"),d.Nb(),d.Ob(28,"ion-datetime",7),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.birthday=i})("ionChange",function(){return d.hc(e),d.Yb().setDate()}),d.Nb(),d.Nb(),d.Nb(),d.Ob(29,"ion-col",4),d.Ob(30,"ion-item"),d.Ob(31,"ion-label",5),d.nc(32,"Sexo (*)"),d.Nb(),d.Ob(33,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("gender","gender",i.formData.gender)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(34,"ion-col",4),d.Ob(35,"ion-item"),d.Ob(36,"ion-label",5),d.nc(37,"Tipo de sangre (*)"),d.Nb(),d.Ob(38,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("bloodType","bloodType",i.formData.bloodType)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(39,"ion-col",4),d.Ob(40,"ion-item"),d.Ob(41,"ion-label",5),d.nc(42,"Estado civil (*)"),d.Nb(),d.Ob(43,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("civilStatus","civilStatus",i.formData.civilStatus)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(44,"ion-col",4),d.Ob(45,"ion-item"),d.Ob(46,"ion-label",5),d.nc(47,"Nivel educativo (*)"),d.Nb(),d.Ob(48,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("educationLevel","educationLevel",i.formData.educationLevel)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(49,"ion-col",4),d.Ob(50,"ion-item"),d.Ob(51,"ion-label",5),d.nc(52,"Profesi\xf3n (*)"),d.Nb(),d.Ob(53,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("profession","professions",i.formData.profession)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(54,"ion-col",4),d.Ob(55,"ion-item"),d.Ob(56,"ion-label",5),d.nc(57,"\xbfPosee una empresa? (*)"),d.Nb(),d.Ob(58,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertYesOrNotList("company",i.formData.company)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(59,"ion-col",4),d.lc(60,N,4,2,"ion-item",1),d.Nb(),d.Ob(61,"ion-col",4),d.Ob(62,"ion-item"),d.Ob(63,"ion-label",5),d.nc(64,"\xbfEst\xe1s bautizado?"),d.Nb(),d.Ob(65,"ion-input",8),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertYesOrNotList("baptized",i.formData.baptized)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(66,"ion-col",4),d.Ob(67,"ion-item"),d.Ob(68,"ion-label",5),d.nc(69,"Departamento (*)"),d.Nb(),d.Ob(70,"ion-input",9),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("department","departments",i.formData.department)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(71,"ion-col",4),d.Ob(72,"ion-item"),d.Ob(73,"ion-label",5),d.nc(74,"Ciudad (*)"),d.Nb(),d.Ob(75,"ion-input",9),d.Wb("click",function(){d.hc(e);const i=d.Yb();return i.showAlertList("city","cities",i.formData.city)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(76,"ion-col",4),d.Ob(77,"ion-item"),d.Ob(78,"ion-label",5),d.nc(79,"Barrio o localidad (*)"),d.Nb(),d.Ob(80,"ion-input",6),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.locality=i}),d.Nb(),d.Nb(),d.Nb(),d.Ob(81,"ion-col",4),d.Ob(82,"ion-item"),d.Ob(83,"ion-label",5),d.nc(84,"Direcci\xf3n (*)"),d.Nb(),d.Ob(85,"ion-input",6),d.Wb("ngModelChange",function(i){return d.hc(e),d.Yb().formData.direction=i}),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(86,"ion-row",10),d.Ob(87,"ion-col",11),d.Ob(88,"ion-button",12),d.Wb("click",function(){return d.hc(e),d.Yb().back()}),d.Mb(89,"ion-icon",13),d.nc(90," Cancelar "),d.Nb(),d.Ob(91,"ion-button",14),d.Wb("click",function(){return d.hc(e),d.Yb().confirmUpdate()}),d.Mb(92,"ion-icon",15),d.nc(93," Guardar "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&e){const e=d.Yb();d.zb(8),d.bc("ngModel",e.formData.names),d.zb(5),d.bc("ngModel",e.formData.lastNames),d.zb(5),d.bc("ngModel",e.formData.email),d.zb(5),d.bc("ngModel",e.formData.phone),d.zb(5),d.cc("max",e.maxDate),d.bc("ngModel",e.formData.birthday),d.zb(5),d.bc("readonly",!0)("value",e.gender[e.formData.gender]||""),d.zb(5),d.bc("readonly",!0)("value",e.bloodType[e.formData.bloodType]||""),d.zb(5),d.bc("readonly",!0)("value",e.civilStatus[e.formData.civilStatus]||""),d.zb(5),d.bc("readonly",!0)("value",e.educationLevel[e.formData.educationLevel]||""),d.zb(5),d.bc("readonly",!0)("value",e.professions[e.formData.profession]||""),d.zb(5),d.bc("readonly",!0)("value",e.formData.company),d.zb(2),d.bc("ngIf","Si"===e.formData.company),d.zb(5),d.bc("readonly",!0)("value",e.formData.baptized),d.zb(5),d.bc("readonly",!0)("value",e.departments[e.formData.department]||""),d.zb(5),d.bc("readonly",!0)("value",e.cities[e.formData.city]||""),d.zb(5),d.bc("ngModel",e.formData.locality),d.zb(5),d.bc("ngModel",e.formData.direction)}}const v=[{path:"",component:(()=>{class e{constructor(e,i,t,o,n){this.editarService=e,this.cookieService=i,this.perfilService=t,this.globalSer=o,this.navCtrl=n,this.professions=[],this.companyType=[],this.educationLevel=[],this.bloodType=[],this.departments=[],this.cities=[],this.civilStatus=[],this.gender=[],this.yesOrNotValues=["No","Si"],this.maxDate=null,this.formData=null,this.educationLevel=e.educationLevel,this.professions=e.professionsList,this.bloodType=e.bloodTypeList,this.companyType=e.companyTypeList,this.civilStatus=e.civilStatusList,this.gender=e.genderList,this.departments=e.departmentsList.map(e=>e.department),this.maxDate=b()().format("YYYY-MM-DD")}ngOnInit(){return Object(c.a)(this,void 0,void 0,function*(){if(yield this.globalSer.presentLoading(),this.cookieService.getCookie("token")){const e=this.cookieService.getCookie("data");e?(this.formData=Object.assign({},e),this.formData.company=this.formData.company?"Si":"No",this.formData.baptized=this.formData.baptized?"Si":"No",null!==this.formData.department&&this.getCity(),yield this.globalSer.dismissLoading()):yield this.errorSession()}else yield this.errorSession()})}back(){return Object(c.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}getCity(e=!1){const i=this.editarService.departmentsList[this.formData.department]||null;i&&(this.cities=i.cities||[]),e&&(this.formData.city=null)}setDate(){this.formData.birthday&&(this.formData.birthday=b()(this.formData.birthday).format("YYYY-MM-DD"))}errorSession(){return Object(c.a)(this,void 0,void 0,function*(){yield this.globalSer.presentAlert("Alerta","Disculpe, pero no se encontr\xf3 una sesi\xf3n activa."),this.globalSer.clearAllData(),yield this.globalSer.dismissLoading(),yield this.navCtrl.navigateBack(["/"])})}showAlertList(e,i,t=null){return Object(c.a)(this,void 0,void 0,function*(){const o=[];for(const[e,n]of this[i].entries())o.push({name:`value-${e}`,type:"radio",label:n,value:e,checked:null!==t&&t.toString()===e.toString()});yield this.globalSer.alertWithList({inputs:o,confirmAction:i=>{this.formData[e]=i,"department"===e&&this.getCity(!0)}})})}showAlertYesOrNotList(e,i=null){return Object(c.a)(this,void 0,void 0,function*(){const t=[];for(const[e,o]of this.yesOrNotValues.entries())t.push({name:`value-${e}`,type:"radio",label:o,value:o,checked:o===i});yield this.globalSer.alertWithList({inputs:t,confirmAction:i=>{this.formData[e]=i}})})}validateOnlyNumbers(e){Object(l.j)(e)}validateOnlyLetters(e){Object(l.i)(e)}validateData(){const{formData:e}=this;return Object(l.c)(e.email)?Object(l.e)(e.names)?Object(l.e)(e.lastNames)?Object(l.g)(e.phone)?Object(l.a)(e.birthday)?Object(l.d)(`${e.gender}`)?Object(l.d)(`${e.bloodType}`)?Object(l.d)(`${e.civilStatus}`)?Object(l.d)(`${e.educationLevel}`)?Object(l.d)(`${e.profession}`)?null==e.company?"Disculpe, pero debe indicar si posee una empresa.":null===e.company||"Si"!==e.company||Object(l.d)(`${e.companyType}`)?null==e.baptized?"Disculpe, pero debe indicar si usted se encuentra bautizado.":Object(l.d)(`${e.department}`)?Object(l.d)(`${e.city}`)?Object(l.h)(e.locality)?Object(l.h)(e.direction)?null:"Disculpe, pero debe indicar su direcci\xf3n de residencia.":"Disculpe, pero debe indicar el nombre de la localidad de residencia.":"Disculpe, pero debe indicar la ciudad de residencia.":"Disculpe, pero debe indicar el departamento de residencia.":"Disculpe, pero debe indicar el tipo de empresa que posee.":"Disculpe, pero debe indicar su profesi\xf3n.":"Disculpe, pero debe indicar su nivel educativo.":"Disculpe, pero debe indicar su estado civil.":"Disculpe, pero debe indicar su tipo de sangre.":"Disculpe, pero debe indicar su sexo.":"Disculpe, pero debe indicar su fecha de nacimiento.":"Disculpe, pero debe indicar su n\xfamero de tel\xe9fono.":"Disculpe, pero debe indicar su apellido.":"Disculpe, pero debe indicar su nombre.":"Disculpe, pero debe indicar su correo electr\xf3nico."}updateData(){return Object(c.a)(this,void 0,void 0,function*(){const e=this.validateData();if(e)yield this.globalSer.presentAlert("Alerta",e);else{yield this.globalSer.presentLoading("Actualizando perfil, por favor espere ...");const e=Object.assign({},this.formData);e.company="Si"===e.company,e.baptized="Si"===e.baptized;const i=yield this.editarService.updateProfile(e);if(i&&!i.error){const e=this.cookieService.getCookie("data");e&&this.cookieService.setCookie("data",Object.assign(Object.assign({},e),i)),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha actualizado su perfil exitosamente."),yield this.back()}else i&&i.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()}})}confirmUpdate(){return Object(c.a)(this,void 0,void 0,function*(){const e=this.validateData();e?yield this.globalSer.presentAlert("Alerta",e):yield this.globalSer.alertConfirm({header:"Actualizar perfil",message:"\xbfEst\xe1 seguro qu\xe9 desea actualizar los datos de su perfil?",confirmAction:()=>this.updateData()})})}}return e.\u0275fac=function(i){return new(i||e)(d.Lb(f),d.Lb(O.a),d.Lb(y.a),d.Lb(h.a),d.Lb(a.K))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-editar"]],decls:4,vars:1,consts:[["title","Editar perfil"],[4,"ngIf"],[1,"ion-no-padding"],[1,"ion-justify-content-center"],["size","12"],["position","floating","color","medium"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["displayFormat","DD/MM/YYYY","min","1910-03-14","doneText","Listo","cancelText","Cancelar",3,"ngModel","max","ngModelChange","ionChange"],["autocomplete","off",3,"readonly","value","click"],["autocomplete","off",1,"ion-text-uppercase",3,"readonly","value","click"],[1,"ion-margin-top","ion-margin-bottom"],["size","12",1,"ion-text-center"],["color","light",3,"click"],["name","close","slot","start"],["color","primary",3,"click"],["name","save-outline","slot","start"]],template:function(e,i){1&e&&(d.Ob(0,"ion-content"),d.Ob(1,"ion-header"),d.Mb(2,"app-minheader",0),d.Nb(),d.lc(3,D,94,27,"div",1),d.Nb()),2&e&&(d.zb(3),d.bc("ngIf",i.formData))},directives:[a.m,a.r,g.a,o.i,a.f,a.g,a.B,a.l,a.v,a.w,a.u,a.O,n.e,n.f,a.n,a.N,a.d,a.s],styles:[""]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[r.i.forChild(v)],r.i]}),e})();var L=t("j1ZV");let Y=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[o.b,n.a,a.G,S,L.a]]}),e})()}}]);