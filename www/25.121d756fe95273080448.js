(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{Wtct:function(o,i,n){"use strict";n.r(i),n.d(i,"InicioPageModule",function(){return v});var t=n("ofXK"),e=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),a=n("mrSG"),c=n("fXoL"),l=n("1Ldg"),b=n("QTu/"),g=n("4WDQ");function d(o,i){if(1&o&&(c.Ob(0,"ion-text",9),c.mc(1),c.Nb()),2&o){const o=c.Yb();c.zb(1),c.pc(" ",o.userData.names," ",o.userData.lastNames," ")}}function u(o,i){if(1&o){const o=c.Pb();c.Ob(0,"div",10),c.Mb(1,"br"),c.Mb(2,"br"),c.Mb(3,"br"),c.Ob(4,"ion-row",11),c.Ob(5,"ion-col",12),c.Ob(6,"h4"),c.Ob(7,"ion-text",13),c.mc(8," Inicio de sesi\xf3n "),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(9,"ion-row",11),c.Ob(10,"ion-col",14),c.Ob(11,"ion-item"),c.Ob(12,"ion-label",15),c.mc(13,"N\xba de tel\xe9fono"),c.Nb(),c.Ob(14,"ion-input",16),c.Wb("ngModelChange",function(i){return c.gc(o),c.Yb().phone=i}),c.Nb(),c.Nb(),c.Nb(),c.Ob(15,"ion-col",14),c.Ob(16,"ion-item"),c.Ob(17,"ion-label",15),c.mc(18,"Contrase\xf1a"),c.Nb(),c.Ob(19,"ion-input",17),c.Wb("ngModelChange",function(i){return c.gc(o),c.Yb().pass=i}),c.Nb(),c.Nb(),c.Nb(),c.Ob(20,"ion-col",14),c.Ob(21,"p",18),c.Wb("click",function(){return c.gc(o),c.Yb().goTo("recuperar-acceso")}),c.Ob(22,"ion-text",19),c.mc(23,"\xbfOlvidaste tu contrase\xf1a?"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(24,"ion-row",20),c.Ob(25,"ion-col",12),c.Ob(26,"ion-button",21),c.Wb("click",function(){return c.gc(o),c.Yb().goTo("registro")}),c.mc(27," Registro "),c.Nb(),c.Nb(),c.Ob(28,"ion-col",12),c.Ob(29,"ion-button",22),c.Wb("click",function(){return c.gc(o),c.Yb().ingresar()}),c.mc(30," Ingresar "),c.Nb(),c.Nb(),c.Nb(),c.Mb(31,"ion-row",11),c.Nb()}if(2&o){const o=c.Yb();c.zb(14),c.bc("ngModel",o.phone),c.zb(5),c.bc("ngModel",o.pass)}}function p(o,i){if(1&o){const o=c.Pb();c.Ob(0,"ion-col",25),c.Wb("click",function(){c.gc(o);const n=i.index;return c.Yb(2).irMenu(n)}),c.Ob(1,"p"),c.Mb(2,"img",26),c.Nb(),c.Ob(3,"ion-text",27),c.mc(4),c.Nb(),c.Nb()}if(2&o){const o=i.$implicit;c.zb(2),c.bc("src",o.imagen,c.ic),c.zb(2),c.nc(o.titulo)}}function h(o,i){if(1&o&&(c.Ob(0,"div",23),c.Mb(1,"br"),c.Ob(2,"ion-row",11),c.kc(3,p,5,2,"ion-col",24),c.Nb(),c.Mb(4,"br"),c.Nb()),2&o){const o=c.Yb();c.zb(3),c.bc("ngForOf",o.opciones)}}function m(o,i){if(1&o){const o=c.Pb();c.Ob(0,"ion-fab",28),c.Ob(1,"ion-fab-button",29),c.Wb("click",function(){return c.gc(o),c.Yb().goTo("perfil")}),c.Mb(2,"ion-icon",30),c.Nb(),c.Nb()}}const f=[{path:"",component:(()=>{class o{constructor(o,i,n,t){this.axios=o,this.cookieService=i,this.globalSer=n,this.navCtrl=t,this.login=!1,this.userData=null,this.phone="31612345678",this.pass="password",this.opciones=[{titulo:"Red padres",imagen:"assets/icon/red.svg",url:"padres"},{titulo:"Ofrendas",imagen:"assets/icon/ofrenda.svg",url:"ofrenda"},{titulo:"Escuela",imagen:"assets/icon/escuela.svg",url:"escuela"},{titulo:"Reportes",imagen:"assets/icon/reportes.svg",url:"estadistica"},{titulo:"Eventos",imagen:"assets/icon/calendario.svg",url:"eventos"},{titulo:"Salir",imagen:"assets/icon/logout.svg",url:null}]}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){yield this.getDataLogin()})}getDataLogin(){return Object(a.a)(this,void 0,void 0,function*(){if(this.cookieService.getCookie("token")){this.login=!0;const o=this.cookieService.getCookie("data");if(o)this.userData=o;else{const o=yield this.axios.getData("/user");o&&o.success?(this.cookieService.setCookie("data",o.data.data),this.userData=o.data.data,yield this.globalSer.dismissLoading()):(o.status&&401===o.status&&(this.cookieService.removeCookie("token"),this.login=!1),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",o.error))}}else this.login=!1})}ingresar(){return Object(a.a)(this,void 0,void 0,function*(){if(this.pass&&this.phone){yield this.globalSer.presentLoading();const o=yield this.axios.postData("/login",{phone:this.phone,password:this.pass});if(o&&o.success){const{data:i,token:n}=o.data;this.cookieService.setCookie("token",n),this.cookieService.setCookie("data",i),this.userData=i,this.login=!0,this.phone=null,this.pass=null,yield this.globalSer.dismissLoading()}else this.phone=null,this.pass=null,yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",o.error)}else yield this.globalSer.presentAlert("Alerta","Aseg\xfarese de indicar su n\xfamero de tel\xe9fono y contrase\xf1a.")})}irMenu(o){return Object(a.a)(this,void 0,void 0,function*(){const i=this.opciones[o]||null;i&&(i.url?yield this.navCtrl.navigateForward(i.url):yield this.globalSer.alertConfirm({header:"Salir",message:"\xbfEst\xe1 seguro qu\xe9 desea finalizar la sesi\xf3n?",confirmAction:()=>Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading(),this.userData=null,this.axios.deleteData("/logout"),yield this.globalSer.clearAllData(),this.login=!1,yield this.globalSer.dismissLoading()})}))})}goTo(o){return Object(a.a)(this,void 0,void 0,function*(){yield this.navCtrl.navigateForward(`/${o}`)})}}return o.\u0275fac=function(i){return new(i||o)(c.Lb(l.a),c.Lb(b.a),c.Lb(g.a),c.Lb(s.L))},o.\u0275cmp=c.Fb({type:o,selectors:[["app-inicio"]],decls:16,vars:4,consts:[[1,"fondoCool","ion-justify-content-end","ion-padding"],["size","8",1,"ion-margin-top","ion-padding-top"],["color","light",1,"titulo1"],["color","light","class","titulo2",4,"ngIf"],["size","4"],["src","assets/logo.png",1,"logo"],["class","ion-margin-top ion-padding-top",4,"ngIf"],["class","ion-margin-top ion-padding-top ion-margin-bottom ion-padding-bottom",4,"ngIf"],["class","ion-margin-end ion-margin-bottom","vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["color","light",1,"titulo2"],[1,"ion-margin-top","ion-padding-top"],[1,"ion-justify-content-center"],["size","auto"],["color","primary"],["size","9"],["position","floating","color","medium"],["maxlength","12",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[3,"click"],["color","medium",1,"ion-text-start"],[1,"ion-justify-content-center","ion-margin-top"],["expand","block","color","light",3,"click"],["expand","block","color","primary",3,"click"],[1,"ion-margin-top","ion-padding-top","ion-margin-bottom","ion-padding-bottom"],["size","5","class","ion-text-center ion-margin-top ion-padding-top","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["size","5",1,"ion-text-center","ion-margin-top","ion-padding-top",2,"cursor","pointer",3,"click"],["alt","",3,"src"],["color","medium",1,"ion-padding-top"],["vertical","bottom","horizontal","end","slot","fixed",1,"ion-margin-end","ion-margin-bottom"],["color","primary",3,"click"],["name","person-outline"]],template:function(o,i){1&o&&(c.Ob(0,"ion-content"),c.Ob(1,"ion-row",0),c.Ob(2,"ion-col",1),c.Mb(3,"br"),c.Mb(4,"br"),c.Mb(5,"br"),c.Mb(6,"br"),c.Ob(7,"ion-text",2),c.mc(8,"Bienvenido"),c.Nb(),c.Mb(9,"br"),c.kc(10,d,2,2,"ion-text",3),c.Nb(),c.Ob(11,"ion-col",4),c.Mb(12,"img",5),c.Nb(),c.Nb(),c.kc(13,u,32,2,"div",6),c.kc(14,h,5,1,"div",7),c.kc(15,m,3,0,"ion-fab",8),c.Nb()),2&o&&(c.zb(10),c.bc("ngIf",i.userData),c.zb(3),c.bc("ngIf",!i.login),c.zb(1),c.bc("ngIf",i.login),c.zb(1),c.bc("ngIf",i.login))},directives:[s.n,s.C,s.m,s.D,t.i,s.w,s.x,s.v,s.P,e.b,e.e,e.f,s.e,t.h,s.p,s.q,s.t],styles:[".fondoCool[_ngcontent-%COMP%]{background-image:linear-gradient(to right bottom,rgba(0,0,0,.5),rgba(0,0,0,.5)),url(/assets/cruz.png);background-size:cover;background-position:50%}.logo[_ngcontent-%COMP%]{margin-bottom:-190px!important}"]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.Jb({type:o}),o.\u0275inj=c.Ib({imports:[[r.i.forChild(f)],r.i]}),o})(),v=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.Jb({type:o}),o.\u0275inj=c.Ib({imports:[[t.b,e.a,s.H,O]]}),o})()}}]);