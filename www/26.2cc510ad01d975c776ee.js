(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Wtct:function(o,i,n){"use strict";n.r(i),n.d(i,"InicioPageModule",function(){return v});var t=n("ofXK"),e=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),a=n("mrSG"),l=n("fXoL"),c=n("1Ldg"),b=n("QTu/"),g=n("4WDQ");function d(o,i){if(1&o&&(l.Ob(0,"ion-text",9),l.nc(1),l.Nb()),2&o){const o=l.Yb();l.zb(1),l.qc(" ",o.userData.names," ",o.userData.lastNames," ")}}function u(o,i){if(1&o){const o=l.Pb();l.Ob(0,"div",10),l.Mb(1,"br"),l.Mb(2,"br"),l.Mb(3,"br"),l.Ob(4,"ion-row",11),l.Ob(5,"ion-col",12),l.Ob(6,"h4"),l.Ob(7,"ion-text",13),l.nc(8," Inicio de sesi\xf3n "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(9,"ion-row",11),l.Ob(10,"ion-col",14),l.Ob(11,"ion-item"),l.Ob(12,"ion-label",15),l.nc(13,"N\xba de tel\xe9fono"),l.Nb(),l.Ob(14,"ion-input",16),l.Wb("ngModelChange",function(i){return l.hc(o),l.Yb().phone=i}),l.Nb(),l.Nb(),l.Nb(),l.Ob(15,"ion-col",14),l.Ob(16,"ion-item"),l.Ob(17,"ion-label",15),l.nc(18,"Contrase\xf1a"),l.Nb(),l.Ob(19,"ion-input",17),l.Wb("ngModelChange",function(i){return l.hc(o),l.Yb().pass=i}),l.Nb(),l.Nb(),l.Nb(),l.Ob(20,"ion-col",14),l.Ob(21,"p",18),l.Wb("click",function(){return l.hc(o),l.Yb().goTo("recuperar-acceso")}),l.Ob(22,"ion-text",19),l.nc(23,"\xbfOlvidaste tu contrase\xf1a?"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(24,"ion-row",20),l.Ob(25,"ion-col",12),l.Ob(26,"ion-button",21),l.Wb("click",function(){return l.hc(o),l.Yb().goTo("registro")}),l.nc(27," Registro "),l.Nb(),l.Nb(),l.Ob(28,"ion-col",12),l.Ob(29,"ion-button",22),l.Wb("click",function(){return l.hc(o),l.Yb().ingresar()}),l.nc(30," Ingresar "),l.Nb(),l.Nb(),l.Nb(),l.Mb(31,"ion-row",11),l.Nb()}if(2&o){const o=l.Yb();l.zb(14),l.bc("ngModel",o.phone),l.zb(5),l.bc("ngModel",o.pass)}}function p(o,i){if(1&o){const o=l.Pb();l.Ob(0,"ion-col",25),l.Wb("click",function(){l.hc(o);const n=i.index;return l.Yb(2).irMenu(n)}),l.Ob(1,"p"),l.Mb(2,"img",26),l.Nb(),l.Ob(3,"ion-text",27),l.nc(4),l.Nb(),l.Nb()}if(2&o){const o=i.$implicit;l.zb(2),l.bc("src",o.imagen,l.jc),l.zb(2),l.oc(o.titulo)}}function h(o,i){if(1&o&&(l.Ob(0,"div",23),l.Mb(1,"br"),l.Ob(2,"ion-row",11),l.lc(3,p,5,2,"ion-col",24),l.Nb(),l.Mb(4,"br"),l.Nb()),2&o){const o=l.Yb();l.zb(3),l.bc("ngForOf",o.opciones)}}function f(o,i){if(1&o){const o=l.Pb();l.Ob(0,"ion-fab",28),l.Ob(1,"ion-fab-button",29),l.Wb("click",function(){return l.hc(o),l.Yb().goTo("perfil")}),l.Mb(2,"ion-icon",30),l.Nb(),l.Nb()}}const m=[{path:"",component:(()=>{class o{constructor(o,i,n,t){this.axios=o,this.cookieService=i,this.globalSer=n,this.navCtrl=t,this.login=!1,this.userData=null,this.phone=null,this.pass=null,this.opciones=[{titulo:"Red padres",imagen:"assets/icon/red.svg",url:"padres"},{titulo:"Ofrendas",imagen:"assets/icon/ofrenda.svg",url:"ofrenda"},{titulo:"Escuela",imagen:"assets/icon/escuela.svg",url:"escuela"},{titulo:"Reportes",imagen:"assets/icon/reportes.svg",url:"estadistica"},{titulo:"Eventos",imagen:"assets/icon/calendario.svg",url:"eventos"},{titulo:"Salir",imagen:"assets/icon/logout.svg",url:null}]}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){yield this.getDataLogin()})}getDataLogin(){return Object(a.a)(this,void 0,void 0,function*(){if(this.cookieService.getCookie("token")){this.login=!0;const o=this.cookieService.getCookie("data");if(o)this.userData=o;else{const o=yield this.axios.getData("/user");o&&o.success?(this.cookieService.setCookie("data",o.data.data),this.userData=o.data.data,yield this.globalSer.dismissLoading()):(o.status&&401===o.status&&(this.cookieService.removeCookie("token"),this.login=!1),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",o.error))}}else this.login=!1})}ingresar(){return Object(a.a)(this,void 0,void 0,function*(){if(this.pass&&this.phone){yield this.globalSer.presentLoading();const o=yield this.axios.postData("/login",{phone:this.phone,password:this.pass});if(o&&o.success){const{data:i,token:n}=o.data;this.cookieService.setCookie("token",n),this.cookieService.setCookie("data",i),this.userData=i,this.login=!0,this.phone=null,this.pass=null,yield this.globalSer.dismissLoading()}else this.phone=null,this.pass=null,yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",o.error)}else yield this.globalSer.presentAlert("Alerta","Aseg\xfarese de indicar su n\xfamero de tel\xe9fono y contrase\xf1a.")})}irMenu(o){return Object(a.a)(this,void 0,void 0,function*(){const i=this.opciones[o]||null;i&&(i.url?yield this.navCtrl.navigateForward(i.url):yield this.globalSer.alertConfirm({header:"Salir",message:"\xbfEst\xe1 seguro qu\xe9 desea finalizar la sesi\xf3n?",confirmAction:()=>Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading(),this.userData=null,this.axios.deleteData("/logout"),yield this.globalSer.clearAllData(),this.login=!1,yield this.globalSer.dismissLoading()})}))})}goTo(o){return Object(a.a)(this,void 0,void 0,function*(){yield this.navCtrl.navigateForward(`/${o}`)})}}return o.\u0275fac=function(i){return new(i||o)(l.Lb(c.a),l.Lb(b.a),l.Lb(g.a),l.Lb(s.K))},o.\u0275cmp=l.Fb({type:o,selectors:[["app-inicio"]],decls:16,vars:4,consts:[[1,"fondoCool","ion-justify-content-end","ion-padding"],["size","8",1,"ion-margin-top","ion-padding-top"],["color","light",1,"titulo1"],["color","light","class","titulo2",4,"ngIf"],["size","4"],["src","assets/logo.png",1,"logo"],["class","ion-margin-top ion-padding-top",4,"ngIf"],["class","ion-margin-top ion-padding-top ion-margin-bottom ion-padding-bottom",4,"ngIf"],["class","ion-margin-end ion-margin-bottom","vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["color","light",1,"titulo2"],[1,"ion-margin-top","ion-padding-top"],[1,"ion-justify-content-center"],["size","auto"],["color","primary"],["size","9"],["position","floating","color","medium"],["maxlength","12",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[3,"click"],["color","medium",1,"ion-text-start"],[1,"ion-justify-content-center","ion-margin-top"],["expand","block","color","light",3,"click"],["expand","block","color","primary",3,"click"],[1,"ion-margin-top","ion-padding-top","ion-margin-bottom","ion-padding-bottom"],["size","5","class","ion-text-center ion-margin-top ion-padding-top","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["size","5",1,"ion-text-center","ion-margin-top","ion-padding-top",2,"cursor","pointer",3,"click"],["alt","",3,"src"],["color","medium",1,"ion-padding-top"],["vertical","bottom","horizontal","end","slot","fixed",1,"ion-margin-end","ion-margin-bottom"],["color","primary",3,"click"],["name","person-outline"]],template:function(o,i){1&o&&(l.Ob(0,"ion-content"),l.Ob(1,"ion-row",0),l.Ob(2,"ion-col",1),l.Mb(3,"br"),l.Mb(4,"br"),l.Mb(5,"br"),l.Mb(6,"br"),l.Ob(7,"ion-text",2),l.nc(8,"Bienvenido"),l.Nb(),l.Mb(9,"br"),l.lc(10,d,2,2,"ion-text",3),l.Nb(),l.Ob(11,"ion-col",4),l.Mb(12,"img",5),l.Nb(),l.Nb(),l.lc(13,u,32,2,"div",6),l.lc(14,h,5,1,"div",7),l.lc(15,f,3,0,"ion-fab",8),l.Nb()),2&o&&(l.zb(10),l.bc("ngIf",i.userData),l.zb(3),l.bc("ngIf",!i.login),l.zb(1),l.bc("ngIf",i.login),l.zb(1),l.bc("ngIf",i.login))},directives:[s.m,s.B,s.l,s.C,t.i,s.v,s.w,s.u,s.O,e.b,e.e,e.f,s.d,t.h,s.o,s.p,s.s],styles:[".fondoCool[_ngcontent-%COMP%]{background-image:linear-gradient(to right bottom,rgba(0,0,0,.5),rgba(0,0,0,.5)),url(/assets/cruz.png);background-size:cover;background-position:50%}.logo[_ngcontent-%COMP%]{margin-bottom:-190px!important}"]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({imports:[[r.i.forChild(m)],r.i]}),o})(),v=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({imports:[[t.b,e.a,s.G,O]]}),o})()}}]);