(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{L5Cb:function(e,i,t){"use strict";t.r(i),t.d(i,"EditarPageModule",function(){return O});var o=t("ofXK"),n=t("3Pt+"),a=t("TEn/"),r=t("tyNb"),s=t("mrSG"),c=t("Wgwc"),b=t.n(c),l=t("OmbT"),d=t("fXoL"),u=t("0ox5"),p=t("ZrT4"),m=t("1Ldg"),f=t("4WDQ");let h=(()=>{class e{constructor(e,i){this.axios=e,this.globalSer=i,this.professionsList=u.g,this.companyTypeList=u.c,this.departmentsList=p.a,this.educationLevel=u.e,this.bloodTypeList=u.a,this.civilStatusList=u.b,this.genderList=u.f}updateProfile(e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.putData("/user",e);return i&&i.success?i.data.data:this.globalSer.altResponse(i)})}}return e.\u0275fac=function(i){return new(i||e)(d.Qb(m.a),d.Qb(f.a))},e.\u0275prov=d.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=t("QTu/"),y=t("76Eu"),M=t("1U7r");function g(e,i){if(1&e){const e=d.Nb();d.Mb(0,"ion-item"),d.Mb(1,"ion-label",5),d.kc(2,"Tipo de empresa (*)"),d.Lb(),d.Mb(3,"ion-input",9),d.Ub("click",function(){d.ec(e);const i=d.Wb(2);return i.showAlertList("companyType","companyType",i.formData.companyType)}),d.Lb(),d.Lb()}if(2&e){const e=d.Wb(2);d.xb(3),d.Zb("readonly",!0)("value",e.companyType[e.formData.companyType]||"")}}function D(e,i){if(1&e){const e=d.Nb();d.Mb(0,"div"),d.Mb(1,"ion-card"),d.Mb(2,"ion-card-content",2),d.Mb(3,"ion-row",3),d.Mb(4,"ion-col",4),d.Mb(5,"ion-item"),d.Mb(6,"ion-label",5),d.kc(7,"Nombre(s) (*)"),d.Lb(),d.Mb(8,"ion-input",6),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.names=i}),d.Lb(),d.Lb(),d.Lb(),d.Mb(9,"ion-col",4),d.Mb(10,"ion-item"),d.Mb(11,"ion-label",5),d.kc(12,"Apellido(s) (*)"),d.Lb(),d.Mb(13,"ion-input",6),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.lastNames=i}),d.Lb(),d.Lb(),d.Lb(),d.Mb(14,"ion-col",4),d.Mb(15,"ion-item"),d.Mb(16,"ion-label",5),d.kc(17,"Correo electr\xf3nico (*)"),d.Lb(),d.Mb(18,"ion-input",6),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.email=i}),d.Lb(),d.Lb(),d.Lb(),d.Mb(19,"ion-col",4),d.Mb(20,"ion-item"),d.Mb(21,"ion-label",5),d.kc(22,"Tel\xe9fono (*)"),d.Lb(),d.Mb(23,"ion-input",6),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.phone=i}),d.Lb(),d.Lb(),d.Lb(),d.Mb(24,"ion-col",4),d.Mb(25,"ion-item"),d.Mb(26,"ion-label",5),d.kc(27,"Fecha de nacimiento (*)"),d.Lb(),d.Mb(28,"ion-datetime",7),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.birthday=i})("ionChange",function(){return d.ec(e),d.Wb().setDate()}),d.Lb(),d.Lb(),d.Lb(),d.Mb(29,"ion-col",4),d.Mb(30,"ion-item"),d.Mb(31,"ion-label",5),d.kc(32,"Sexo (*)"),d.Lb(),d.Mb(33,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("gender","gender",i.formData.gender)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(34,"ion-col",4),d.Mb(35,"ion-item"),d.Mb(36,"ion-label",5),d.kc(37,"Tipo de sangre (*)"),d.Lb(),d.Mb(38,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("bloodType","bloodType",i.formData.bloodType)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(39,"ion-col",4),d.Mb(40,"ion-item"),d.Mb(41,"ion-label",5),d.kc(42,"Estado civil (*)"),d.Lb(),d.Mb(43,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("civilStatus","civilStatus",i.formData.civilStatus)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(44,"ion-col",4),d.Mb(45,"ion-item"),d.Mb(46,"ion-label",5),d.kc(47,"Nivel educativo (*)"),d.Lb(),d.Mb(48,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("educationLevel","educationLevel",i.formData.educationLevel)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(49,"ion-col",4),d.Mb(50,"ion-item"),d.Mb(51,"ion-label",5),d.kc(52,"Profesi\xf3n (*)"),d.Lb(),d.Mb(53,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("profession","professions",i.formData.profession)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(54,"ion-col",4),d.Mb(55,"ion-item"),d.Mb(56,"ion-label",5),d.kc(57,"\xbfPosee una empresa? (*)"),d.Lb(),d.Mb(58,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertYesOrNotList("company",i.formData.company)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(59,"ion-col",4),d.ic(60,g,4,2,"ion-item",1),d.Lb(),d.Mb(61,"ion-col",4),d.Mb(62,"ion-item"),d.Mb(63,"ion-label",5),d.kc(64,"\xbfEst\xe1s bautizado?"),d.Lb(),d.Mb(65,"ion-input",8),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertYesOrNotList("baptized",i.formData.baptized)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(66,"ion-col",4),d.Mb(67,"ion-item"),d.Mb(68,"ion-label",5),d.kc(69,"Departamento (*)"),d.Lb(),d.Mb(70,"ion-input",9),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("department","departments",i.formData.department)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(71,"ion-col",4),d.Mb(72,"ion-item"),d.Mb(73,"ion-label",5),d.kc(74,"Ciudad (*)"),d.Lb(),d.Mb(75,"ion-input",9),d.Ub("click",function(){d.ec(e);const i=d.Wb();return i.showAlertList("city","cities",i.formData.city)}),d.Lb(),d.Lb(),d.Lb(),d.Mb(76,"ion-col",4),d.Mb(77,"ion-item"),d.Mb(78,"ion-label",5),d.kc(79,"Barrio o localidad (*)"),d.Lb(),d.Mb(80,"ion-input",6),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.locality=i}),d.Lb(),d.Lb(),d.Lb(),d.Mb(81,"ion-col",4),d.Mb(82,"ion-item"),d.Mb(83,"ion-label",5),d.kc(84,"Direcci\xf3n (*)"),d.Lb(),d.Mb(85,"ion-input",6),d.Ub("ngModelChange",function(i){return d.ec(e),d.Wb().formData.direction=i}),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(86,"ion-row",10),d.Mb(87,"ion-col",11),d.Mb(88,"ion-button",12),d.Ub("click",function(){return d.ec(e),d.Wb().back()}),d.Kb(89,"ion-icon",13),d.kc(90," Cancelar "),d.Lb(),d.Mb(91,"ion-button",14),d.Ub("click",function(){return d.ec(e),d.Wb().confirmUpdate()}),d.Kb(92,"ion-icon",15),d.kc(93," Guardar "),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()}if(2&e){const e=d.Wb();d.xb(8),d.Zb("ngModel",e.formData.names),d.xb(5),d.Zb("ngModel",e.formData.lastNames),d.xb(5),d.Zb("ngModel",e.formData.email),d.xb(5),d.Zb("ngModel",e.formData.phone),d.xb(5),d.ac("max",e.maxDate),d.Zb("ngModel",e.formData.birthday),d.xb(5),d.Zb("readonly",!0)("value",e.gender[e.formData.gender]||""),d.xb(5),d.Zb("readonly",!0)("value",e.bloodType[e.formData.bloodType]||""),d.xb(5),d.Zb("readonly",!0)("value",e.civilStatus[e.formData.civilStatus]||""),d.xb(5),d.Zb("readonly",!0)("value",e.educationLevel[e.formData.educationLevel]||""),d.xb(5),d.Zb("readonly",!0)("value",e.professions[e.formData.profession]||""),d.xb(5),d.Zb("readonly",!0)("value",e.formData.company),d.xb(2),d.Zb("ngIf","Si"===e.formData.company),d.xb(5),d.Zb("readonly",!0)("value",e.formData.baptized),d.xb(5),d.Zb("readonly",!0)("value",e.departments[e.formData.department]||""),d.xb(5),d.Zb("readonly",!0)("value",e.cities[e.formData.city]||""),d.xb(5),d.Zb("ngModel",e.formData.locality),d.xb(5),d.Zb("ngModel",e.formData.direction)}}const v=[{path:"",component:(()=>{class e{constructor(e,i,t,o,n){this.editarService=e,this.cookieService=i,this.perfilService=t,this.globalSer=o,this.navCtrl=n,this.professions=[],this.companyType=[],this.educationLevel=[],this.bloodType=[],this.departments=[],this.cities=[],this.civilStatus=[],this.gender=[],this.yesOrNotValues=["No","Si"],this.maxDate=null,this.formData=null,this.educationLevel=e.educationLevel,this.professions=e.professionsList,this.bloodType=e.bloodTypeList,this.companyType=e.companyTypeList,this.civilStatus=e.civilStatusList,this.gender=e.genderList,this.departments=e.departmentsList.map(e=>e.department),this.maxDate=b()().format("YYYY-MM-DD")}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){if(yield this.globalSer.presentLoading(),this.cookieService.getCookie("token")){const e=this.cookieService.getCookie("data");e?(this.formData=Object.assign({},e),this.formData.company=this.formData.company?"Si":"No",this.formData.baptized=this.formData.baptized?"Si":"No",null!==this.formData.department&&this.getCity(),yield this.globalSer.dismissLoading()):yield this.errorSession()}else yield this.errorSession()})}back(){return Object(s.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}getCity(e=!1){const i=this.editarService.departmentsList[this.formData.department]||null;i&&(this.cities=i.cities||[]),e&&(this.formData.city=null)}setDate(){this.formData.birthday&&(this.formData.birthday=b()(this.formData.birthday).format("YYYY-MM-DD"))}errorSession(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.presentAlert("Alerta","Disculpe, pero no se encontr\xf3 una sesi\xf3n activa."),this.globalSer.clearAllData(),yield this.globalSer.dismissLoading(),yield this.navCtrl.navigateBack(["/"])})}showAlertList(e,i,t=null){return Object(s.a)(this,void 0,void 0,function*(){const o=[];for(const[e,n]of this[i].entries())o.push({name:"value-"+e,type:"radio",label:n,value:e,checked:null!==t&&t.toString()===e.toString()});yield this.globalSer.alertWithList({inputs:o,confirmAction:i=>{this.formData[e]=i,"department"===e&&this.getCity(!0)}})})}showAlertYesOrNotList(e,i=null){return Object(s.a)(this,void 0,void 0,function*(){const t=[];for(const[e,o]of this.yesOrNotValues.entries())t.push({name:"value-"+e,type:"radio",label:o,value:o,checked:o===i});yield this.globalSer.alertWithList({inputs:t,confirmAction:i=>{this.formData[e]=i}})})}validateOnlyNumbers(e){Object(l.j)(e)}validateOnlyLetters(e){Object(l.i)(e)}validateData(){const{formData:e}=this;return Object(l.c)(e.email)?Object(l.e)(e.names)?Object(l.e)(e.lastNames)?Object(l.g)(e.phone)?Object(l.a)(e.birthday)?Object(l.d)(""+e.gender)?Object(l.d)(""+e.bloodType)?Object(l.d)(""+e.civilStatus)?Object(l.d)(""+e.educationLevel)?Object(l.d)(""+e.profession)?null==e.company?"Disculpe, pero debe indicar si posee una empresa.":null===e.company||"Si"!==e.company||Object(l.d)(""+e.companyType)?null==e.baptized?"Disculpe, pero debe indicar si usted se encuentra bautizado.":Object(l.d)(""+e.department)?Object(l.d)(""+e.city)?Object(l.h)(e.locality)?Object(l.h)(e.direction)?null:"Disculpe, pero debe indicar su direcci\xf3n de residencia.":"Disculpe, pero debe indicar el nombre de la localidad de residencia.":"Disculpe, pero debe indicar la ciudad de residencia.":"Disculpe, pero debe indicar el departamento de residencia.":"Disculpe, pero debe indicar el tipo de empresa que posee.":"Disculpe, pero debe indicar su profesi\xf3n.":"Disculpe, pero debe indicar su nivel educativo.":"Disculpe, pero debe indicar su estado civil.":"Disculpe, pero debe indicar su tipo de sangre.":"Disculpe, pero debe indicar su sexo.":"Disculpe, pero debe indicar su fecha de nacimiento.":"Disculpe, pero debe indicar su n\xfamero de tel\xe9fono.":"Disculpe, pero debe indicar su apellido.":"Disculpe, pero debe indicar su nombre.":"Disculpe, pero debe indicar su correo electr\xf3nico."}updateData(){return Object(s.a)(this,void 0,void 0,function*(){const e=this.validateData();if(e)yield this.globalSer.presentAlert("Alerta",e);else{yield this.globalSer.presentLoading("Actualizando perfil, por favor espere ...");const e=Object.assign({},this.formData);e.company="Si"===e.company,e.baptized="Si"===e.baptized;const i=yield this.editarService.updateProfile(e);if(i&&!i.error){const e=this.cookieService.getCookie("data");e&&this.cookieService.setCookie("data",Object.assign(Object.assign({},e),i)),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha actualizado su perfil exitosamente."),yield this.back()}else i&&i.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()}})}confirmUpdate(){return Object(s.a)(this,void 0,void 0,function*(){const e=this.validateData();e?yield this.globalSer.presentAlert("Alerta",e):yield this.globalSer.alertConfirm({header:"Actualizar perfil",message:"\xbfEst\xe1 seguro qu\xe9 desea actualizar los datos de su perfil?",confirmAction:()=>this.updateData()})})}}return e.\u0275fac=function(i){return new(i||e)(d.Jb(h),d.Jb(L.a),d.Jb(y.a),d.Jb(f.a),d.Jb(a.L))},e.\u0275cmp=d.Db({type:e,selectors:[["app-editar"]],decls:4,vars:1,consts:[["title","Editar perfil"],[4,"ngIf"],[1,"ion-no-padding"],[1,"ion-justify-content-center"],["size","12"],["position","floating","color","medium"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["displayFormat","DD/MM/YYYY","min","1910-03-14","doneText","Listo","cancelText","Cancelar",3,"ngModel","max","ngModelChange","ionChange"],["autocomplete","off",3,"readonly","value","click"],["autocomplete","off",1,"ion-text-uppercase",3,"readonly","value","click"],[1,"ion-margin-top","ion-margin-bottom"],["size","12",1,"ion-text-center"],["color","light",3,"click"],["name","close","slot","start"],["color","primary",3,"click"],["name","save-outline","slot","start"]],template:function(e,i){1&e&&(d.Mb(0,"ion-content"),d.Mb(1,"ion-header"),d.Kb(2,"app-minheader",0),d.Lb(),d.ic(3,D,94,27,"div",1),d.Lb()),2&e&&(d.xb(3),d.Zb("ngIf",i.formData))},directives:[a.n,a.s,M.a,o.i,a.g,a.h,a.C,a.m,a.w,a.x,a.v,a.O,n.e,n.f,a.o,a.N,a.e,a.t],styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(i){return new(i||e)},imports:[[r.i.forChild(v)],r.i]}),e})();var S=t("j1ZV");let O=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(i){return new(i||e)},imports:[[o.b,n.a,a.H,k,S.a]]}),e})()}}]);