(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{L5Cb:function(e,t,i){"use strict";i.r(t),i.d(t,"EditarPageModule",function(){return Y});var o=i("ofXK"),n=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),c=i("mrSG"),s=i("Wgwc"),b=i.n(s),l=i("OmbT"),d=i("fXoL"),u=i("0ox5"),p=i("ZrT4"),m=i("1Ldg"),h=i("4WDQ");let f=(()=>{class e{constructor(e,t){this.axios=e,this.globalSer=t,this.professionsList=u.g,this.companyTypeList=u.c,this.departmentsList=p.a,this.educationLevel=u.e,this.bloodTypeList=u.a,this.civilStatusList=u.b,this.genderList=u.f}updateProfile(e){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.axios.putData("/user",e);return t&&t.success?t.data.data:this.globalSer.altResponse(t)})}}return e.\u0275fac=function(t){return new(t||e)(d.Sb(m.a),d.Sb(h.a))},e.\u0275prov=d.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=i("QTu/"),y=i("76Eu"),g=i("1U7r");function N(e,t){if(1&e){const e=d.Pb();d.Ob(0,"ion-item"),d.Ob(1,"ion-label",5),d.nc(2,"Tipo de empresa"),d.Nb(),d.Ob(3,"ion-input",9),d.Wb("click",function(){d.hc(e);const t=d.Yb(2);return t.showAlertList("companyType","companyType",t.formData.companyType)}),d.Nb(),d.Nb()}if(2&e){const e=d.Yb(2);d.zb(3),d.bc("readonly",!0)("value",e.companyType[e.formData.companyType]||"")}}function v(e,t){if(1&e){const e=d.Pb();d.Ob(0,"div"),d.Ob(1,"ion-card"),d.Ob(2,"ion-card-content",2),d.Ob(3,"ion-row",3),d.Ob(4,"ion-col",4),d.Ob(5,"ion-item"),d.Ob(6,"ion-label",5),d.nc(7,"Tel\xe9fono (*)"),d.Nb(),d.Ob(8,"ion-input",6),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.phone=t}),d.Nb(),d.Nb(),d.Nb(),d.Ob(9,"ion-col",4),d.Ob(10,"ion-item"),d.Ob(11,"ion-label",5),d.nc(12,"Nombre(s) (*)"),d.Nb(),d.Ob(13,"ion-input",6),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.names=t}),d.Nb(),d.Nb(),d.Nb(),d.Ob(14,"ion-col",4),d.Ob(15,"ion-item"),d.Ob(16,"ion-label",5),d.nc(17,"Apellido(s) (*)"),d.Nb(),d.Ob(18,"ion-input",6),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.lastNames=t}),d.Nb(),d.Nb(),d.Nb(),d.Ob(19,"ion-col",4),d.Ob(20,"ion-item"),d.Ob(21,"ion-label",5),d.nc(22,"Fecha de nacimiento"),d.Nb(),d.Ob(23,"ion-datetime",7),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.birthday=t})("ionChange",function(){return d.hc(e),d.Yb().setDate()}),d.Nb(),d.Nb(),d.Nb(),d.Ob(24,"ion-col",4),d.Ob(25,"ion-item"),d.Ob(26,"ion-label",5),d.nc(27,"Correo electr\xf3nico"),d.Nb(),d.Ob(28,"ion-input",6),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.email=t}),d.Nb(),d.Nb(),d.Nb(),d.Ob(29,"ion-col",4),d.Ob(30,"ion-item"),d.Ob(31,"ion-label",5),d.nc(32,"Sexo"),d.Nb(),d.Ob(33,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("gender","gender",t.formData.gender)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(34,"ion-col",4),d.Ob(35,"ion-item"),d.Ob(36,"ion-label",5),d.nc(37,"Tipo de sangre"),d.Nb(),d.Ob(38,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("bloodType","bloodType",t.formData.bloodType)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(39,"ion-col",4),d.Ob(40,"ion-item"),d.Ob(41,"ion-label",5),d.nc(42,"Estado civil"),d.Nb(),d.Ob(43,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("civilStatus","civilStatus",t.formData.civilStatus)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(44,"ion-col",4),d.Ob(45,"ion-item"),d.Ob(46,"ion-label",5),d.nc(47,"Nivel educativo"),d.Nb(),d.Ob(48,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("educationLevel","educationLevel",t.formData.educationLevel)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(49,"ion-col",4),d.Ob(50,"ion-item"),d.Ob(51,"ion-label",5),d.nc(52,"Profesi\xf3n"),d.Nb(),d.Ob(53,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("profession","professions",t.formData.profession)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(54,"ion-col",4),d.Ob(55,"ion-item"),d.Ob(56,"ion-label",5),d.nc(57,"\xbfPosee una empresa?"),d.Nb(),d.Ob(58,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertYesOrNotList("company",t.formData.company)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(59,"ion-col",4),d.lc(60,N,4,2,"ion-item",1),d.Nb(),d.Ob(61,"ion-col",4),d.Ob(62,"ion-item"),d.Ob(63,"ion-label",5),d.nc(64,"\xbfEst\xe1s bautizado?"),d.Nb(),d.Ob(65,"ion-input",8),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertYesOrNotList("baptized",t.formData.baptized)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(66,"ion-col",4),d.Ob(67,"ion-item"),d.Ob(68,"ion-label",5),d.nc(69,"Departamento"),d.Nb(),d.Ob(70,"ion-input",9),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("department","departments",t.formData.department)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(71,"ion-col",4),d.Ob(72,"ion-item"),d.Ob(73,"ion-label",5),d.nc(74,"Ciudad"),d.Nb(),d.Ob(75,"ion-input",9),d.Wb("click",function(){d.hc(e);const t=d.Yb();return t.showAlertList("city","cities",t.formData.city)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(76,"ion-col",4),d.Ob(77,"ion-item"),d.Ob(78,"ion-label",5),d.nc(79,"Barrio o localidad"),d.Nb(),d.Ob(80,"ion-input",6),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.locality=t}),d.Nb(),d.Nb(),d.Nb(),d.Ob(81,"ion-col",4),d.Ob(82,"ion-item"),d.Ob(83,"ion-label",5),d.nc(84,"Direcci\xf3n"),d.Nb(),d.Ob(85,"ion-input",6),d.Wb("ngModelChange",function(t){return d.hc(e),d.Yb().formData.direction=t}),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(86,"ion-row",10),d.Ob(87,"ion-col",11),d.Ob(88,"ion-button",12),d.Wb("click",function(){return d.hc(e),d.Yb().back()}),d.Mb(89,"ion-icon",13),d.nc(90," Cancelar "),d.Nb(),d.Ob(91,"ion-button",14),d.Wb("click",function(){return d.hc(e),d.Yb().confirmUpdate()}),d.Mb(92,"ion-icon",15),d.nc(93," Guardar "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&e){const e=d.Yb();d.zb(8),d.bc("ngModel",e.formData.phone),d.zb(5),d.bc("ngModel",e.formData.names),d.zb(5),d.bc("ngModel",e.formData.lastNames),d.zb(5),d.cc("max",e.maxDate),d.bc("ngModel",e.formData.birthday),d.zb(5),d.bc("ngModel",e.formData.email),d.zb(5),d.bc("readonly",!0)("value",e.gender[e.formData.gender]||""),d.zb(5),d.bc("readonly",!0)("value",e.bloodType[e.formData.bloodType]||""),d.zb(5),d.bc("readonly",!0)("value",e.civilStatus[e.formData.civilStatus]||""),d.zb(5),d.bc("readonly",!0)("value",e.educationLevel[e.formData.educationLevel]||""),d.zb(5),d.bc("readonly",!0)("value",e.professions[e.formData.profession]||""),d.zb(5),d.bc("readonly",!0)("value",e.formData.company),d.zb(2),d.bc("ngIf","Si"===e.formData.company),d.zb(5),d.bc("readonly",!0)("value",e.formData.baptized),d.zb(5),d.bc("readonly",!0)("value",e.departments[e.formData.department]||""),d.zb(5),d.bc("readonly",!0)("value",e.cities[e.formData.city]||""),d.zb(5),d.bc("ngModel",e.formData.locality),d.zb(5),d.bc("ngModel",e.formData.direction)}}const D=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n){this.editarService=e,this.cookieService=t,this.perfilService=i,this.globalSer=o,this.navCtrl=n,this.professions=[],this.companyType=[],this.educationLevel=[],this.bloodType=[],this.departments=[],this.cities=[],this.civilStatus=[],this.gender=[],this.yesOrNotValues=["No","Si"],this.maxDate=null,this.formData=null,this.educationLevel=e.educationLevel,this.professions=e.professionsList,this.bloodType=e.bloodTypeList,this.companyType=e.companyTypeList,this.civilStatus=e.civilStatusList,this.gender=e.genderList,this.departments=e.departmentsList.map(e=>e.department),this.maxDate=b()().format("YYYY-MM-DD")}ngOnInit(){return Object(c.a)(this,void 0,void 0,function*(){if(yield this.globalSer.presentLoading(),this.cookieService.getCookie("token")){const e=this.cookieService.getCookie("data");e?(this.formData=Object.assign({},e),this.formData.company=this.formData.company?"Si":"No",this.formData.baptized=this.formData.baptized?"Si":"No",null!==this.formData.department&&this.getCity(),yield this.globalSer.dismissLoading()):yield this.errorSession()}else yield this.errorSession()})}back(){return Object(c.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}getCity(e=!1){const t=this.editarService.departmentsList[this.formData.department]||null;t&&(this.cities=t.cities||[]),e&&(this.formData.city=null)}setDate(){this.formData.birthday&&(this.formData.birthday=b()(this.formData.birthday).format("YYYY-MM-DD"))}errorSession(){return Object(c.a)(this,void 0,void 0,function*(){yield this.globalSer.presentAlert("Alerta","Disculpe, pero no se encontr\xf3 una sesi\xf3n activa."),this.globalSer.clearAllData(),yield this.globalSer.dismissLoading(),yield this.navCtrl.navigateBack(["/"])})}showAlertList(e,t,i=null){return Object(c.a)(this,void 0,void 0,function*(){const o=[];for(const[e,n]of this[t].entries())o.push({name:`value-${e}`,type:"radio",label:n,value:e,checked:null!==i&&i.toString()===e.toString()});yield this.globalSer.alertWithList({inputs:o,confirmAction:t=>{this.formData[e]=t,"department"===e&&this.getCity(!0)}})})}showAlertYesOrNotList(e,t=null){return Object(c.a)(this,void 0,void 0,function*(){const i=[];for(const[e,o]of this.yesOrNotValues.entries())i.push({name:`value-${e}`,type:"radio",label:o,value:o,checked:o===t});yield this.globalSer.alertWithList({inputs:i,confirmAction:t=>{this.formData[e]=t}})})}validateOnlyNumbers(e){Object(l.i)(e)}validateOnlyLetters(e){Object(l.h)(e)}validateData(){const{formData:e}=this;return Object(l.f)(e.phone)?Object(l.d)(e.names)?Object(l.d)(e.lastNames)?e.email&&!Object(l.b)(e.email)?"Disculpe, pero debe un correo electr\xf3nico v\xe1lido.":e.birthday&&!Object(l.a)(e.birthday)?"Disculpe, pero debe indicar su fecha de nacimiento.":null==e.company?"Disculpe, pero debe indicar si posee una empresa.":null===e.company||"Si"!==e.company||Object(l.c)(`${e.companyType}`)?null:"Disculpe, pero debe indicar el tipo de empresa que posee.":"Disculpe, pero debe indicar su apellido.":"Disculpe, pero debe indicar su nombre.":"Disculpe, pero debe indicar su n\xfamero de tel\xe9fono."}updateData(){return Object(c.a)(this,void 0,void 0,function*(){const e=this.validateData();if(e)yield this.globalSer.presentAlert("Alerta",e);else{yield this.globalSer.presentLoading("Actualizando perfil, por favor espere ...");const e=Object.assign({},this.formData);e.company="Si"===e.company,e.baptized="Si"===e.baptized;const t=yield this.editarService.updateProfile(e);if(t&&!t.error){const e=this.cookieService.getCookie("data");e&&this.cookieService.setCookie("data",Object.assign(Object.assign({},e),t)),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha actualizado su perfil exitosamente."),yield this.back()}else t&&t.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()}})}confirmUpdate(){return Object(c.a)(this,void 0,void 0,function*(){const e=this.validateData();e?yield this.globalSer.presentAlert("Alerta",e):yield this.globalSer.alertConfirm({header:"Actualizar perfil",message:"\xbfEst\xe1 seguro qu\xe9 desea actualizar los datos de su perfil?",confirmAction:()=>this.updateData()})})}}return e.\u0275fac=function(t){return new(t||e)(d.Lb(f),d.Lb(O.a),d.Lb(y.a),d.Lb(h.a),d.Lb(a.K))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-editar"]],decls:4,vars:1,consts:[["title","Editar perfil"],[4,"ngIf"],[1,"ion-no-padding"],[1,"ion-justify-content-center"],["size","12"],["position","floating","color","medium"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["displayFormat","DD/MM/YYYY","min","1910-03-14","doneText","Listo","cancelText","Cancelar",3,"ngModel","max","ngModelChange","ionChange"],["autocomplete","off",3,"readonly","value","click"],["autocomplete","off",1,"ion-text-uppercase",3,"readonly","value","click"],[1,"ion-margin-top","ion-margin-bottom"],["size","12",1,"ion-text-center"],["color","light",3,"click"],["name","close","slot","start"],["color","primary",3,"click"],["name","save-outline","slot","start"]],template:function(e,t){1&e&&(d.Ob(0,"ion-content"),d.Ob(1,"ion-header"),d.Mb(2,"app-minheader",0),d.Nb(),d.lc(3,v,94,27,"div",1),d.Nb()),2&e&&(d.zb(3),d.bc("ngIf",t.formData))},directives:[a.m,a.r,g.a,o.i,a.f,a.g,a.B,a.l,a.v,a.w,a.u,a.O,n.e,n.f,a.n,a.N,a.d,a.s],styles:[""]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[r.i.forChild(D)],r.i]}),e})();var L=i("j1ZV");let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[o.b,n.a,a.G,S,L.a]]}),e})()}}]);