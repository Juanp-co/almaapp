{"version":3,"sources":["./src/app/views/curso/temario/temario.module.ts","./src/app/views/curso/temario/temario.page.ts","./src/app/views/curso/temario/temario.page.scss","./src/app/views/curso/temario/temario.page.html","./src/app/views/curso/temario/temario-routing.module.ts"],"names":[],"mappings":"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","file":"temario-temario-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TemarioPageRoutingModule } from './temario-routing.module';\n\nimport { TemarioPage } from './temario.page';\n\nimport { ComponentsModule } from '../../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TemarioPageRoutingModule,\n    ComponentsModule,\n  ],\n  declarations: [TemarioPage]\n})\nexport class TemarioPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {ModalController, NavController} from '@ionic/angular';\nimport {ICursoTemarioContent, ICursoTemarioExtended} from '../course.model';\nimport {ModalContenidoTemaPage} from '../modal-contenido-tema/modal-contenido-tema.page';\nimport {ModalExamenTemaPage} from '../modal-examen-tema/modal-examen-tema.page';\nimport {CursoService} from '../curso.service';\nimport {CookiesService} from '../../../services/cookies.service';\nimport {GlobalService} from '../../../services/global.service';\n\n@Component({\n  selector: 'app-temario',\n  templateUrl: './temario.page.html',\n  styleUrls: ['./temario.page.scss'],\n})\nexport class TemarioPage implements OnInit {\n\n  slug: string | null = null;\n  themeId: string | null = null;\n  theme: ICursoTemarioContent | null = null;\n  dataCourseUser: any = null;\n\n  constructor(\n    private activateRoute: ActivatedRoute,\n    private cookiesService: CookiesService,\n    private cursoService: CursoService,\n    private globalSer: GlobalService,\n    private navCtrl: NavController,\n    private modalController: ModalController,\n    private router: Router,\n  ) {\n    // check if exist session\n    if (!this.globalSer.checkSession()) this.router.navigate(['/']);\n    else {\n      this.slug = this.activateRoute.snapshot.paramMap.get('slug');\n      this.themeId = this.activateRoute.snapshot.paramMap.get('themeId');\n    }\n  }\n\n  async ngOnInit() {\n  }\n\n  async ionViewDidEnter() {\n    // check if exist session\n    if (!this.globalSer.checkSession()) this.router.navigate(['/']);\n    else await this.getCoursesList();\n  }\n\n  async getCoursesList() {\n\n    if (this.slug && this.themeId) {\n      await this.globalSer.presentLoading();\n      const data: any = await this.cursoService.getThemeCourse(this.slug, this.themeId);\n\n      if (data && !data.error) {\n        this.theme = data as ICursoTemarioContent;\n        this.dataCourseUser = this.cookiesService.getCookie(this.slug);\n        await this.globalSer.dismissLoading();\n      }\n      else if (data && data.error) {\n        await this.globalSer.dismissLoading();\n        await this.globalSer.errorSession();\n      }\n      else {\n        await this.globalSer.dismissLoading();\n        await this.navCtrl.back();\n      }\n    }\n    else {\n      await this.globalSer.presentAlert('Alerta', 'Ha ocurrido un error al momento de obtener los datos a consultar.');\n      await this.navCtrl.back();\n    }\n  }\n\n  async openClassModal(i: number) {\n\n    const updateOnDismiss = async () => {\n      // send data to update the view history\n      const view = await this.updateHistorical(content._id, '2');\n      if (view) this.theme.content[i].view = view;\n      let accumulated = 0;\n      this.theme.content.forEach(c => { if (c.view === 2) accumulated++; });\n      this.theme.view = accumulated === this.theme.content.length ? 2 : 1;\n      if (this.dataCourseUser){\n        const index = this.dataCourseUser.temary.findIndex((d: any) => d.temaryId === this.themeId);\n        if (index > -1) {\n          this.dataCourseUser.temary[index].view = this.theme.view;\n          this.cookiesService.setCookie(this.slug, this.dataCourseUser);\n        }\n      }\n    };\n\n    await this.globalSer.presentLoading();\n    const content: ICursoTemarioExtended | null = this.theme.content[i] || null;\n\n    if (content) {\n      this.theme.content[i].view = 1;\n      // send data to update the view history\n      this.updateHistorical(content._id, '1');\n      await this.globalSer.dismissLoading();\n\n      await this.globalSer.loadModal(\n        ModalContenidoTemaPage,\n        { content },\n        false,\n        updateOnDismiss\n      );\n    }\n    else {\n      await this.globalSer.presentAlert('Alerta', 'Ha ocurrido un error al momento de cargar el contenido.');\n      await this.navCtrl.back();\n    }\n  }\n\n  async openTestModal() {\n    await this.globalSer.presentLoading();\n    const content: any = {\n      slug: this.slug,\n      themeId: this.themeId,\n      title: this.theme.title,\n      test: null\n    };\n\n    const data: any = await this.cursoService.getTestThemeCourse(this.slug, this.themeId);\n\n    if (data && !data.error) {\n      if (data && data.length > 0) {\n        content.test = data;\n        await this.globalSer.dismissLoading();\n        await this.globalSer.loadModal(\n          ModalExamenTemaPage,\n          content,\n          false\n        );\n      }\n      else {\n        await this.globalSer.dismissLoading();\n        await this.globalSer.presentAlert('Alerta', 'Disculpe, pero la pueba actual no está disponible.');\n      }\n    }\n    else if (data && data.error) {\n      await this.globalSer.dismissLoading();\n      await this.globalSer.errorSession();\n    }\n    else {\n      await this.globalSer.dismissLoading();\n    }\n  }\n\n  async updateHistorical(contentId: string, action: string): Promise<number> {\n    return this.cursoService.updateHistoricalThemeCourse(this.slug, this.themeId, contentId, action);\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0ZW1hcmlvLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-content *ngIf=\\\"theme\\\">\\n  <ion-header>\\n    <app-minheader title=\\\"{{ theme.title || 'Cargando ...' }}\\\"></app-minheader>\\n  </ion-header>\\n\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-title class=\\\"\\\">Descripción</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <div [innerHTML]=\\\"theme.description\\\"></div>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card *ngIf=\\\"theme.content && theme.content.length > 0\\\">\\n    <ion-card-header>\\n      <ion-card-title>Contenido</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-list *ngFor='let content of theme.content; let i=index'>\\n        <!--<ion-item button (click)=\\\"goToClass(i)\\\">-->\\n        <ion-item class=\\\"ion-no-padding ion-no-margin\\\" button (click)=\\\"openClassModal(i)\\\">\\n          <ion-avatar slot=\\\"start\\\">\\n            <ion-img src=\\\"/assets/icon/{{content.view === 2 ? 'clase_video' : 'clase_video_gris'}}.svg\\\" *ngIf=\\\"content.urlVideo\\\"></ion-img>\\n            <ion-img src=\\\"/assets/icon/{{content.view === 2 ? 'clase_texto' : 'clase_texto_gris'}}.svg\\\" *ngIf=\\\"!content.urlVideo\\\"></ion-img>\\n          </ion-avatar>\\n          <ion-text><b>{{ content.title }}</b></ion-text>\\n\\n          <ion-icon\\n            name=\\\"time-outline\\\"\\n            slot=\\\"end\\\"\\n            *ngIf=\\\"content.view === 0\\\"\\n          ></ion-icon>\\n          <ion-icon\\n            name=\\\"eye-outline\\\"\\n            slot=\\\"end\\\"\\n            *ngIf=\\\"content.view === 1\\\"\\n          ></ion-icon>\\n          <ion-icon\\n            name=\\\"checkmark-done-outline\\\"\\n            slot=\\\"end\\\"\\n            *ngIf=\\\"content.view === 2\\\"\\n          ></ion-icon>\\n        </ion-item>\\n      </ion-list>\\n    </ion-card-content>\\n\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-title>Examen</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <ion-text *ngIf=\\\"theme.view !== 2\\\">\\n            Complete el listado de contenidos del tema para poder presentar el examen.\\n          </ion-text>\\n          <ion-button expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"openTestModal()\\\" *ngIf=\\\"theme.view === 2\\\">\\n            Presentar exámen\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-card-content>\\n\\n  </ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TemarioPage } from './temario.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TemarioPage\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TemarioPageRoutingModule {}\n"],"sourceRoot":"webpack:///"}